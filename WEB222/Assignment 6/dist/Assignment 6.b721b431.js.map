{"mappings":"AAAA,cAAc;AACb,CAAA;IACC,YAAY;IACZ,SAAS,aAAa,KAAK;QACzB,OAAO,eAAe,IAAI,CAAC;IAC7B;IACA,SAAS,eAAe,KAAK;QAC3B,OAAO,MACJ,KAAK,CAAC,UACN,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,IACf,MAAM,CAAC;IACZ;IACA,SAAS,YAAY,KAAK;QACxB,IAAI;YAAE,MAAM,IAAI,IAAI,IAAI;YAAQ,OAAO,CAAC,CAAC,EAAE,QAAQ,IAAI,CAAC,CAAC,EAAE,IAAI;QAAE,EACjE,OAAM;YAAE,OAAO;QAAO;IACxB;IACA,SAAS,UAAU,EAAE,EAAE,GAAG,EAAE,UAAU,KAAK;QACzC,IAAI,CAAC,IAAI;QACT,GAAG,WAAW,GAAG;QACjB,GAAG,SAAS,CAAC,MAAM,CAAC,SAAS;IAC/B;IACA,eAAe,SAAS,IAAI,EAAE,QAAQ;QACpC,MAAM,OAAO,IAAI,SAAS;QAC1B,UAAU,UAAU;QACpB,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,KAAK,MAAM,EAAE;gBAAE,QAAQ;gBAAQ,MAAM;YAAK;YAClE,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,CAAC,KAAK,EAAE,IAAI,MAAM,EAAE;YACjD,UAAU,UAAU;YACpB,KAAK,KAAK;QACZ,EAAE,OAAO,KAAK;YACZ,UAAU,UAAU,wCAAwC;QAC9D;IACF;IAEA,kBAAkB;IAClB,MAAM,iBAAiB,SAAS,cAAc,CAAC;IAC/C,IAAI,gBAAgB;QAClB,MAAM,aAAa,SAAS,cAAc,CAAC;QAC3C,MAAM,WAAW,SAAS,cAAc,CAAC;QACzC,eAAe,gBAAgB,CAAC,UAAU,CAAC;YACzC,EAAE,cAAc;YAChB,IAAI,CAAC,WAAW,KAAK,IAAI,CAAC,aAAa,WAAW,KAAK,GAAG;gBACxD,UAAU,UAAU,uCAAuC;gBAC3D,WAAW,KAAK;gBAAI;YACtB;YACA,SAAS,gBAAgB;QAC3B;IACF;IAEA,sBAAsB;IACtB,MAAM,aAAa,SAAS,cAAc,CAAC;IAC3C,IAAI,YAAY;QACd,MAAM,WAAW,SAAS,cAAc,CAAC;QACzC,MAAM,SAAS,SAAS,cAAc,CAAC;QACvC,MAAM,UAAU,SAAS,cAAc,CAAC;QACxC,MAAM,WAAW,SAAS,cAAc,CAAC;QACzC,MAAM,YAAY,SAAS,cAAc,CAAC;QAC1C,MAAM,cAAc,SAAS,cAAc,CAAC;QAE5C,YAAY,gBAAgB,CAAC,SAAS;YACpC,MAAM,QAAQ,UAAU,gBAAgB,CAAC,eAAe,MAAM;YAC9D,MAAM,OAAO,SAAS,aAAa,CAAC;YACpC,KAAK,SAAS,GAAG;YACjB,MAAM,QAAQ,SAAS,aAAa,CAAC;YACrC,MAAM,IAAI,GAAG;YAAO,MAAM,IAAI,GAAG;YAAe,MAAM,EAAE,GAAG,CAAC,MAAM,EAAE,OAAO;YAC3E,MAAM,WAAW,GAAG;YACpB,MAAM,YAAY,CAAC,aAAa;YAChC,MAAM,YAAY,SAAS,aAAa,CAAC;YACzC,UAAU,IAAI,GAAG;YAAU,UAAU,SAAS,GAAG;YAAgB,UAAU,WAAW,GAAG;YACzF,UAAU,gBAAgB,CAAC,SAAS,IAAM,KAAK,MAAM;YACrD,KAAK,WAAW,CAAC;YAAQ,KAAK,WAAW,CAAC;YAC1C,UAAU,WAAW,CAAC;YACtB;QACF;QAEA,SAAS;YACP,MAAM,QAAQ,UAAU,gBAAgB,CAAC;YACzC,MAAM,aAAa,MAAM,MAAM,GAAG;YAClC,MAAM,OAAO,CAAC,CAAA;gBACZ,MAAM,MAAM,KAAK,aAAa,CAAC;gBAC/B,IAAI,KAAK,IAAI,MAAM,GAAG,CAAC;YACzB;QACF;QACA;QAEA,WAAW,gBAAgB,CAAC,UAAU,CAAC;YACrC,EAAE,cAAc;YAChB,IAAI,CAAC,OAAO,KAAK,CAAC,IAAI,IAAI;gBACxB,UAAU,UAAU,wCAAmC;gBACvD,OAAO,KAAK;gBAAI;YAClB;YACA,IAAI,CAAC,QAAQ,KAAK,CAAC,IAAI,IAAI;gBACzB,UAAU,UAAU,kCAAkC;gBACtD,QAAQ,KAAK;gBAAI;YACnB;YACA,MAAM,YAAY,SAAS,KAAK,CAAC,IAAI;YACrC,IAAI,WAAW;gBACb,MAAM,UAAU,eAAe;gBAC/B,MAAM,UAAU,QAAQ,MAAM,CAAC,CAAA,IAAK,CAAC,YAAY;gBACjD,IAAI,QAAQ,MAAM,EAAE;oBAClB,UAAU,UAAU,wCAAwC;oBAC5D,SAAS,KAAK;oBAAI;gBACpB;gBACA,WAAW,MAAM,CAAC,oBAAoB,KAAK,SAAS,CAAC;YACvD;YACA,MAAM,cAAc;mBAAI,UAAU,gBAAgB,CAAC;aAA6B;YAChF,MAAM,YAAY,YAAY,GAAG,CAAC,CAAA,IAAK,EAAE,KAAK,CAAC,IAAI,IAAI,MAAM,CAAC;YAC9D,MAAM,MAAM,UAAU,MAAM,CAAC,CAAA,IAAK,CAAC,YAAY;YAC/C,IAAI,IAAI,MAAM,EAAE;gBACd,UAAU,UAAU,4CAA4C;gBAChE,MAAM,WAAW,YAAY,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,IAAI,CAAC,YAAY,EAAE,KAAK;gBACtE,IAAI,UAAU,SAAS,KAAK;gBAAI;YAClC;YACA,SAAS,YAAY;QACvB;IACF;AACF,CAAA","sources":["js/forms.js"],"sourcesContent":["// js/forms.js\n(function () {\n  // Utilities\n  function isValidEmail(value) {\n    return /\\S+@\\S+\\.\\S+/.test(value);\n  }\n  function splitMultiUrls(value) {\n    return value\n      .split(/[\\s,]+/)\n      .map(s => s.trim())\n      .filter(Boolean);\n  }\n  function validateUrl(value) {\n    try { const u = new URL(value); return !!u.protocol && !!u.host; }\n    catch { return false; }\n  }\n  function setStatus(el, msg, isError = false) {\n    if (!el) return;\n    el.textContent = msg;\n    el.classList.toggle(\"error\", isError);\n  }\n  async function postForm(form, statusEl) {\n    const data = new FormData(form);\n    setStatus(statusEl, \"Submitting…\");\n    try {\n      const res = await fetch(form.action, { method: \"POST\", body: data });\n      if (!res.ok) throw new Error(`HTTP ${res.status}`);\n      setStatus(statusEl, \"Thanks! Submission received.\");\n      form.reset();\n    } catch (err) {\n      setStatus(statusEl, \"Submission failed. Please try again.\", true);\n    }\n  }\n\n  // Newsletter form\n  const newsletterForm = document.getElementById(\"newsletter-form\");\n  if (newsletterForm) {\n    const emailInput = document.getElementById(\"newsletter-email\");\n    const statusEl = document.getElementById(\"newsletter-status\");\n    newsletterForm.addEventListener(\"submit\", (e) => {\n      e.preventDefault();\n      if (!emailInput.value || !isValidEmail(emailInput.value)) {\n        setStatus(statusEl, \"Please enter a valid email address.\", true);\n        emailInput.focus(); return;\n      }\n      postForm(newsletterForm, statusEl);\n    });\n  }\n\n  // Request Artist page\n  const artistForm = document.getElementById(\"artist-form\");\n  if (artistForm) {\n    const statusEl = document.getElementById(\"artist-status\");\n    const nameEl = document.getElementById(\"artist-name\");\n    const genreEl = document.getElementById(\"genre\");\n    const socialEl = document.getElementById(\"social-urls\");\n    const mediaList = document.getElementById(\"media-list\");\n    const addMediaBtn = document.getElementById(\"add-media\");\n\n    addMediaBtn.addEventListener(\"click\", () => {\n      const count = mediaList.querySelectorAll(\".media-item\").length;\n      const wrap = document.createElement(\"div\");\n      wrap.className = \"inline media-item\";\n      const input = document.createElement(\"input\");\n      input.type = \"url\"; input.name = \"mediaUrls[]\"; input.id = `media-${count}`;\n      input.placeholder = \"https://example.com/song-or-video\";\n      input.setAttribute(\"inputmode\", \"url\");\n      const removeBtn = document.createElement(\"button\");\n      removeBtn.type = \"button\"; removeBtn.className = \"remove-media\"; removeBtn.textContent = \"Remove\";\n      removeBtn.addEventListener(\"click\", () => wrap.remove());\n      wrap.appendChild(input); wrap.appendChild(removeBtn);\n      mediaList.appendChild(wrap);\n      toggleRemoveButtons();\n    });\n\n    function toggleRemoveButtons() {\n      const items = mediaList.querySelectorAll(\".media-item\");\n      const showRemove = items.length > 1;\n      items.forEach(item => {\n        const btn = item.querySelector(\".remove-media\");\n        if (btn) btn.hidden = !showRemove;\n      });\n    }\n    toggleRemoveButtons();\n\n    artistForm.addEventListener(\"submit\", (e) => {\n      e.preventDefault();\n      if (!nameEl.value.trim()) {\n        setStatus(statusEl, \"Please enter the artist’s name.\", true);\n        nameEl.focus(); return;\n      }\n      if (!genreEl.value.trim()) {\n        setStatus(statusEl, \"Please choose or type a genre.\", true);\n        genreEl.focus(); return;\n      }\n      const socialRaw = socialEl.value.trim();\n      if (socialRaw) {\n        const socials = splitMultiUrls(socialRaw);\n        const invalid = socials.filter(u => !validateUrl(u));\n        if (invalid.length) {\n          setStatus(statusEl, \"One or more social URLs are invalid.\", true);\n          socialEl.focus(); return;\n        }\n        artistForm.append(\"socialUrlsParsed\", JSON.stringify(socials));\n      }\n      const mediaInputs = [...mediaList.querySelectorAll('input[name=\"mediaUrls[]\"]')];\n      const mediaUrls = mediaInputs.map(i => i.value.trim()).filter(Boolean);\n      const bad = mediaUrls.filter(u => !validateUrl(u));\n      if (bad.length) {\n        setStatus(statusEl, \"One or more song/video URLs are invalid.\", true);\n        const firstBad = mediaInputs.find(i => i.value && !validateUrl(i.value));\n        if (firstBad) firstBad.focus(); return;\n      }\n      postForm(artistForm, statusEl);\n    });\n  }\n})();"],"names":[],"version":3,"file":"Assignment 6.b721b431.js.map","sourceRoot":"/__parcel_source_root/"}